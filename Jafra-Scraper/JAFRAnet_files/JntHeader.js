function fnCrtfrmNotif(){paramAjx='opc_h=crtNotif';respAjax=excAjax('jnTHome',paramAjx,'sync');n=respAjax.search("%%EndMsgs%%");msgS=respAjax.substring(0,n-4);var dat=new Array();dat=msgS.split('%$#!');$("#spCountMsg").html(dat[0]);$("#spCountMsgB").html(dat[0]);$("#frmNotMsg").remove();$('body').append('<form id="frmNotMsg" name="frmNotMsg" method="post"></form>');$("#frmNotMsg").append("<input type='hidden' name='NMsgCount' id='NMsgCount"+"' value='"+parseInt(dat[1])+"'>");$("#frmNotMsg").append("<input type='hidden' name='NMsgLastD' id='NMsgLastD"+"' value='0'>");j=parseInt(dat[1])+2;for(i=2;i<j;i++){gp=(dat[i]).substr(0,10);id=(dat[i]).substr(10,09);tx=(dat[i]).substr(19);$("#frmNotMsg").append("<input type='hidden' name='NMsgGp_"+i+"' id='NMsgGp_"+(i-1)+"' value='"+gp+"'>");$("#frmNotMsg").append("<input type='hidden' name='NMsgId_"+i+"' id='NMsgId_"+(i-1)+"' value='"+id+"'>");$("#frmNotMsg").append("<input type='hidden' name='NMsgTx_"+i+"' id='NMsgTx_"+(i-1)+"' value='"+tx+"'>");}
msgS=respAjax.substring(n+11);if(msgS==""){return;}
dat=msgS.split('%$#!');$("#spCountAtt").html(dat[2]);$("#frmNotAtt").remove();$('body').append('<form id="frmNotAtt" name="frmNotAtt" method="post"></form>');$("#frmNotAtt").append("<input type='hidden' name='velpat' id='velpat"+"' value='"+parseCookie(TheCookieValue,5)+"'>");$("#frmNotAtt").append("<input type='hidden' name='numate' id='numate"+"' value='"+dat[0]+"'>");$("#frmNotAtt").append("<input type='hidden' name='NAttTx' id='NAttTx"+"' value='"+dat[1]+"'>");}
function fnCloseNMsg(){fnSndResAjx($("#NMsgGp_"+frmNotMsg.NMsgLastD.value).val(),$("#NMsgId_"+frmNotMsg.NMsgLastD.value).val());$(".modal-backdrop").css({display:"none"});if(parseInt(frmNotMsg.NMsgLastD.value)<parseInt(frmNotMsg.NMsgCount.value)){$(".modal-backdrop").css({display:"none"});setTimeout(function(){$("#btNotMsg").trigger("click");},350);}
else{frmNotMsg.NMsgLastD.value=0;}}
function fnSndResAjx(gpMsg,idMsg){paramAjx='opc_h=YleNotif&grp_h='+gpMsg+'&msg_h='+idMsg;respAjax=excAjax('jnTHome',paramAjx,'async');}
function fnJMia(CookieName){if(!confirm('Al ingresar a JafraMia finalizará tu sesión en JafraNet')){return false;}
paramAjx='action_h=gFN';respAjax=excAjax('jnTGetMia',paramAjx,'sync');paramAjx='action_h=gLN&string1_h='+window.btoa(respAjax);respAjax=excAjax('jnTGetMia',paramAjx,'sync');window.open("https://www.jaframia.com/jaframia-auth/"+respAjax,"_self");deleteCookie(CookieName);}
function fnDspNotMsg(){frmNotMsg.NMsgLastD.value=parseInt(frmNotMsg.NMsgLastD.value)+1;$("#pNotMsgCont").html($("#NMsgTx_"+frmNotMsg.NMsgLastD.value).val());}
function fnDspNotAtt(tip){try{dspTxt=frmNotAtt.NAttTx.value;}
catch(e){dspTxt='Por el momento no tienes ninguna atención pendiente de respuesta';}
if(tip=='M'){alert(dspTxt);}
else{$("#dvNotAtt").html(dspTxt);}}
function fnExcRspAtt(atn){$("#frmTemporalExcAtn").remove();$('body').append('<form id="frmTemporalExcAtn" name="frmTemporalExcAtn" method="post"></form>');$('#frmTemporalExcAtn').append('<input type="hidden" name="velpat" id= "velpat" value="'+parseCookie(TheCookieValue,5)+'">');$("#frmTemporalExcAtn").append('<input type="hidden" name="numate" id= "numate" value="'+atn+'">');excPgm('JNTCGATJAA','JNTCGATJAB','frmTemporalExcAtn')}
function fnFormatMenus(){fnCrtEvents();fnSpinner();fnReadyHead();fnCrtMenus();}
function fnCrtEvents(){$(function(){$(document).on('mouseover','#nav li.nav-dinam',function(e){$(this).addClass('hover');});$(document).on('mouseout','#nav li.nav-dinam',function(e){$(this).removeClass('hover');});$(document).on('click','.sidenav .mobmenu>a',function(e){$(this).siblings(".subitem").slideToggle();$(this).toggleClass('icon-minus');});$(document).on('click','.subitem .mobile-menu>li>a',function(e){$(this).next('ul').slideToggle();$(this).toggleClass('icon-minus');});});}
function fnCrtMenus(){paramAjx='opc_h=getMenuPC';jsonObj=excAjax('jnTHome',paramAjx,'sync');data=$.parseJSON(jsonObj);var html='',div='',html1='',html2='',columna='';var elementosSub=0;var categorias=0;var subelementos=0;var elementos=0;var residuo=0;var divUno=0,divDos=0;var col1=0;var col2=0;var subelementos=0;var restantes=0;for(i in data.menu){if(data.menu[i].titulo!==undefined){subtitulo=data.menu[i].subTitulo;html+='<li class="nav-dinam">'+'<a href="#">'+data.menu[i].titulo+'</a>'+'<div class="sub-nav mf2">'+'<div class="nav-wrap">'+'<div class="submenu col-md-12">';elementosSub=0;subelementos=0;categorias=data.menu[i].submenu.length;for(j in data.menu[i].submenu){for(k in data.menu[i].submenu[j].elementos){subelementos++;}}
subelementos+=categorias;elementosSub+=subelementos;col1=0;html1='<div class="col-md-6">'+'<div class="item">';html2='<div class="col-md-6">'+'<div class="item">';for(j in data.menu[i].submenu){if(data.menu[i].submenu[j].titulo!==undefined){elementos=0;categorias=0;div='<label class="subCatgory">'+data.menu[i].submenu[j].titulo+'</label>'+'<ul class="list-unstyled">';col1++;for(k in data.menu[i].submenu[j].elementos){if(data.menu[i].submenu[j].elementos[k].texto!==undefined){col1++;div+='<li><a href="javaScript:excPgm(\''+data.menu[i].submenu[j].elementos[k].prog+'\',\''+data.menu[i].submenu[j].elementos[k].html+'\',\'\',\''+data.menu[i].submenu[j].elementos[k].parms+'\');">'+data.menu[i].submenu[j].elementos[k].texto+'</a></li>';}}
div+='</ul>';residuo=elementosSub%2;if(residuo==0){divUno=elementosSub/2;if(col1<=divUno){restantes=divUno-col1;if(restantes<=divUno){html1+=div;}
else{html2+=div;}}
else{html2+=div;}}
else{divUno=(elementosSub/2)+0.5;divDos=(elementosSub/2)-0.5;if(col1<=divUno){html1+=div;}
else{html2+=div;}}}}
html1+='</div></div>';html2+='</div></div>';html+=html1+html2;html+='</div></div><div class="sub-nav-footer"><span>'+subtitulo+'</span></div></div></li>';}}
$('#nav .nav').html(html);var html=''
for(i in data.menu){if(data.menu[i].titulo!==undefined){html+='<div class="mitem mobmenu">'+'<a href="#">'+data.menu[i].titulo+'</a>';for(j in data.menu[i].submenu){if(data.menu[i].submenu[j].titulo!==undefined){html+='<div class="subitem" style="display:none;">'+'<ul class="mobile-menu">'+'<li>'+'<a href="#" style="padding-right:55px;">'+data.menu[i].submenu[j].titulo+'</a>'+'<ul style="display:none">';for(k in data.menu[i].submenu[j].elementos){if(data.menu[i].submenu[j].elementos[k].texto!==undefined){html+='<li><a href="javaScript:excPgm(\''+data.menu[i].submenu[j].elementos[k].prog+'\',\''+data.menu[i].submenu[j].elementos[k].html+'\',\'\',\''+data.menu[i].submenu[j].elementos[k].parms+'\');">'+data.menu[i].submenu[j].elementos[k].texto+'</a></li>';}}
html+='</ul></li></ul></div>';}}
html+='</div>';}}
$('#mobile-menu .sidenav').html(html);}
function fnSpinner(){$(function(){$('.spinner .btn:first-of-type').on('click',function(){var btn=$(this);var input=btn.closest('.spinner').find('input');if(input.attr('max')==undefined||parseInt(input.val())<parseInt(input.attr('max'))){input.val(parseInt(input.val(),10)+1);}else{btn.next("disabled",true);}});$('.spinner .btn:last-of-type').on('click',function(){var btn=$(this);var input=btn.closest('.spinner').find('input');if(input.attr('min')==undefined||parseInt(input.val())>parseInt(input.attr('min'))){input.val(parseInt(input.val(),10)-1);}else{btn.prev("disabled",true);}});})}
function fnReadyHead(){$("#nav li").hover(function(){$(this).addClass('hover');},function(){$(this).removeClass('hover');});$("#nav .nav-dinam").hover(function(){$(this).addClass('hover');},function(){$(this).removeClass('hover');});$("#btnSearch").click(function(){$(".search-list").slideToggle();});$(".search-form input").keypress(function(e){if(e.keyCode==13){$(".search-list").show();}});$('.addcartbtn').click(function(e){$(this).text('Agregado al Pedido');setTimeout(function(){$(e.target).text('Agregar al Pedido');},2000);});$(".mob-top .search").click(function(){$(".mobsearch").slideToggle();});$(".sidenav .mobmenu a").click(function(){$(this).next().slideToggle();$(this).toggleClass('icon-minus');});$("#mobile-menu").mobileMenu({MenuWidth:250,SlideSpeed:300,WindowsMaxWidth:767,PagePush:true,FromLeft:true,Overlay:true,CollapseMenu:true,ClassName:"mobile-menu"});var trigger=$('.mm-toggle'),isClosed=false;trigger.click(function(){hamburger_cross();});function hamburger_cross(){if(isClosed==true){trigger.removeClass('is-open');trigger.addClass('is-closed');isClosed=false;}else{trigger.removeClass('is-closed');trigger.addClass('is-open');isClosed=true;}}}
function fnCrtMsgWin(){$("#msgWindow").remove();newValWin='<div class="modal fade cpop" id="msgWindow">'+'<div class="modal fade cpop in" id="newWindow" style="display: block;">'+'<div class="modal-dialog">'+'<div class="modal-content">'+'<div class="modal-header">'+'<button id="btCloseNWin" type="button" class="close" data-dismiss="modal" aria-label="Close">'+'<span aria-hidden="true">×</span>'+'</button>'+'<h4 class="modal-title" id="myModalLabel">Este es el Título de la venta (Ventana de usos Múltiples)</h4>'+'</div>'+'<div class="modal-body">'+'<div class="acceptreject">'+'<p class="light">'+'Este texto es el primero que aparece en la ventana<br>y aparece con fondo blanco y texto en negro, le llamaremos Text01'+'</p>'+'<div class="wrap">'+'<div class="head">'+'<div class="tophead">'+'<div class="row">'+'<div class="col-sm-8">'+'<p>Este es el título de la parte gris le llamaremos TitGray</p>'+'</div>'+'</div>'+'<div class="row">'+'<div class="col-sm-8">'+'<p style="padding-left: 15px;">Esta es la segunda parte de la sección gris, le llamaremos TxtGray01</p>'+'</div>'+'</div>'+'<div class="row btmhead">'+'<div class="col-sm-8">'+'<span style="padding-left: 15px;">'+'Esta es la tercera sección de la parte gris de la ventana, esta parte gris se utilizará cuando se desea resaltar información importante'+'</span>'+'</div>'+'</div>'+'<div class="row btmhead">'+'<div class="col-sm-8">'+'<span style="padding-left: 15px;">Cant: 3</span>'+'<span>Precio: $196.00</span>'+'</div>'+'</div>'+'</div>'+'</div>'+'<div class="wrapbody">'+'<p><strong>Este es el título de la parte de detalle de la ventana, le llamaremos TitDetWin</strong></p>'+'<div class="table-area">'+'<p>En esta parte podemos incluir información que detalle lo que nosotros deseamos desplegar, en este caso incluimos una tabla</p>'+'<div class="table-responsive">'+'<table class="table table-filter">'+'<tbody>'+'<tr>'+'<td><input type="radio" name="abc" checked=""></td>'+'<td class="productPhoto"><img src="./order-entry-p1_files/48202.png" alt=""></td>'+'<td>50 ml.</td>'+'<td>Loción Hidratante Matificante</td>'+'</tr>'+'<tr>'+'<td><input type="radio" name="abc"></td>'+'<td class="productPhoto"><img src="./order-entry-p1_files/48194.jpg" alt=""></td>'+'<td>200 ml.</td>'+'<td>Loción Facial Matificante</td>'+'</tr>'+'<tr>'+'<td><input type="radio" name="abc"></td>'+'<td class="productPhoto">&nbsp;</td>'+'<td>&nbsp;</td>'+'<td>Eliminar producto agotado</td>'+'</tr>'+'</tbody>'+'</table>'+'</div>'+'</div>'+'</div>'+'</div>'+'</div>'+'<div class="row">'+'<div class="col-sm-6">'+'<a onclick="$(\'#btCloseNWin\').trigger(\'click\');" href="#" class="btn full btn-grey-light">'+'Este botónn se utilizará para cancelar el movimiento que la ventana está solicitando, este boton debe detonar click en X (Cerrar Ventana).'+'</a>'+'</div>'+'<div class="col-sm-6">'+'<a href="#" class="btn full btn-blue-light" data-dismiss="modal">'+'Este botón Se utilizará para aceptar el movimiento que la ventana está solicitando, y nos llevará al siguiente paso.'+'</a>'+'</div>'+'</div>'+'</div>'+'</div>'+'</div>'+'</div>';$('body').append(newValWin);$("#anLnkMsg").trigger("click");}